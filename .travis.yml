language: go
go:
  - "1.8.x"
  - "1.9.x"
  - "1.10.x"
  - "1.11.x"
  - "stable"
  - tip

matrix:
  include:
    - go: "stable"
      env: GOLINT=true
  allow_failures:
    - go: tip

script:
  - if [ ! -z "${GOLINT}" ]; then script/setup/dev-tools; fi
  - go build -i .
  - if [ ! -z "${GOLINT}" ]; then make check; fi
  - go build
  - go test -v ./...
